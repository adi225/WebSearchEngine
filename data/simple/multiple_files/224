ftp redirects here for other uses see ftp disambiguation internet protocol suite application layer dhcp dhcpv6 dns ftp http imap irc ldap mgcp nntp bgp ntp pop rpc rtp rtsp rip sip smtp snmp socks ssh telnet tls ssl xmpp more transport layer tcp udp dccp sctp rsvp more internet layer ip ipv4 ipv6 icmp icmpv6 ecn igmp ipsec more link layer arp inarp ndp ospf tunnels l2tp ppp media access control ethernet dsl isdn fddi more v t e file transfer protocol ftp is a standard network protocol used to transfer files from one host or to another host over a tcp based network such as the internet ftp is built on a client server architecture and uses separate control and data connections between the client and the server 1 ftp users may authenticate themselves using a clear text sign in protocol normally in the form of a username and password but can connect anonymously if the server is configured to allow it for secure transmission that hides encrypts the username and password and encrypts the content ftp is often secured with ssl tls ftps ssh file transfer protocol sftp is sometimes also used instead but is technologically different the first ftp client applications were command line applications developed before operating systems had graphical user interfaces and are still shipped with most windows unix and linux operating systems 2 3 dozens of ftp clients and automation utilities have since been developed for desktops servers mobile devices and hardware and ftp has been incorporated into hundreds of productivity applications such as web page editors contents 1 history 2 protocol overview 2 1 communication and data transfer 2 2 login 2 3 anonymous ftp 2 4 nat and firewall traversal 2 5 differences from http 3 web browser support 3 1 syntax 4 security 4 1 secure ftp 4 1 1 ftps 4 1 2 sftp 4 1 3 ftp over ssh not sftp 5 list of ftp commands 6 ftp reply codes 7 see also 8 references 9 further reading 10 external links edit history the original specification for the file transfer protocol was written by abhay bhushan and published as rfc 114 on 16 april 1971 and later replaced by rfc 765 june 1980 and rfc 959 october 1985 the current specification several proposed standards amend rfc 959 for example rfc 2228 june 1997 proposes security extensions and rfc 2428 september 1998 adds support for ipv6 and defines a new type of passive mode 4 edit protocol overview edit communication and data transfer the protocol was first specified june 1980 and updated in rfc 959 2 which is summarized here 5 the server responds over the control connection with three digit status codes in ascii with an optional text message for example 200 or 200 ok means that the last command was successful the numbers represent the code for the response and the optional text represents a human readable explanation or request e g lt need account for storing file gt 1 an ongoing transfer of file data over the data connection can be aborted using an interrupt message sent over the control connection illustration of starting a passive connection using port 21 ftp may run in active or passive mode which determines how the data connection is established 6 in active mode the client creates a tcp control connection to the server and sends the server the client s ip address and an arbitrary client port number and then waits until the server initiates the data connection over tcp to that client ip address and client port number 7 in situations where the client is behind a firewall and unable to accept incoming tcp connections passive mode may be used in this mode the client uses the control connection to send a pasv command to the server and then receives a server ip address and server port number from the server 7 6 which the client then uses to open a data connection from an arbitrary client port to the server ip address and server port number received 5 both modes were updated in september 1998 to support ipv6 further changes were introduced to the passive mode at that time updating it to extended passive mode 8 while transferring data over the network four data representations can be used 2 3 4 ascii mode used for text data is converted if needed from the sending host s character representation to 8 bit ascii before transmission and again if necessary to the receiving host s character representation as a consequence this mode is inappropriate for files that contain data other than plain text image mode commonly called binary mode the sending machine sends each file byte for byte and the recipient stores the bytestream as it receives it image mode support has been recommended for all implementations of ftp ebcdic mode use for plain text between hosts using the ebcdic character set this mode is otherwise like ascii mode local mode allows two computers with identical setups to send data in a proprietary format without the need to convert it to ascii for text files different format control and record structure options are provided these features were designed to facilitate files containing telnet or asa data transfer can be done in any of three modes 1 2 stream mode data is sent as a continuous stream relieving ftp from doing any processing rather all processing is left up to tcp no end of file indicator is needed unless the data is divided into records block mode ftp breaks the data into several blocks block header byte count and data field and then passes it on to tcp 4 compressed mode data is compressed using a single algorithm usually run length encoding edit login ftp login utilizes a normal usernames and password scheme for granting access 2 the username is sent to the server using the user command and the password is sent using the pass command 2 if the information provided by the client is accepted by the server the server will send a greeting to the client and the session will commence 2 if the server supports it users may log in without providing login credentials but the server may authorize only limited access for such sessions 2 edit anonymous ftp a host that provides an ftp service may provide anonymous ftp access 2 users typically log into the service with an anonymous lower case and case sensitive in some ftp servers account when prompted for user name although users are commonly asked to send their email address in lieu of a password 3 no verification is actually performed on the supplied data 9 many ftp hosts whose purpose is to provide software updates will provide anonymous logins 3 edit nat and firewall traversal ftp normally transfers data by having the server connect back to the client after the port command is sent by the client this is problematic for both nats and firewalls which do not allow connections from the internet towards internal hosts 10 for nats an additional complication is that the representation of the ip addresses and port number in the port command refer to the internal host s ip address and port rather than the public ip address and port of the nat there are two approaches to this problem one is that the ftp client and ftp server use the pasv command which causes the data connection to be established from the ftp client to the server 10 this is widely used by modern ftp clients another approach is for the nat to alter the values of the port command using an application level gateway for this purpose 10 edit differences from http ftp is considered an out of band protocol as opposed to an in band protocol such as http 11 edit web browser support most common web browsers can retrieve files hosted on ftp servers although they may not support protocol extensions such as ftps 3 12 when an ftp rather than an http url is supplied the accessible contents on the remote server are presented in a manner that is similar to that used for other web content a full featured ftp client can be run within firefox in the form of an extension called fireftp edit syntax ftp url syntax is described in rfc1738 13 taking the form ftp lt user gt lt password gt lt host gt lt port gt lt url path gt 13 the bracketed parts are optional for example ftp public ftp servers example com mydirectory myfile txt or ftp user001 secretpassword private ftp servers example com mydirectory myfile txt more details on specifying a username and password may be found in the browsers documentation such as for example firefox 14 and internet explorer 15 by default most web browsers use passive pasv mode which more easily traverses end user firewalls edit security ftp was not designed to be a secure protocol especially by today s standards and has many security weaknesses 16 in may 1999 the authors of rfc 2577 listed a vulnerability to the following problems 17 brute force attacks bounce attacks packet capture sniffing port stealing spoof attacks username protection ftp is not able to encrypt its traffic all transmissions are in clear text and usernames passwords commands and data can be easily read by anyone able to perform packet capture sniffing on the network 2 16 this problem is common to many of the internet protocol specifications such as smtp telnet pop and imap that were designed prior to the creation of encryption mechanisms such as tls or ssl 4 a common solution to this problem is to use the secure tls protected versions of the insecure protocols e g ftps for ftp telnets for telnet etc or a different more secure protocol that can handle the job such as the sftp scp tools included with most implementations of the secure shell protocol edit secure ftp there are several methods of securely transferring files that have been called secure ftp at one point or another edit ftps explicit ftps is an extension to the ftp standard that allows clients to request that the ftp session be encrypted this is done by sending the auth tls command the server has the option of allowing or denying connections that do not request tls this protocol extension is defined in the proposed standard rfc 4217 implicit ftps is a deprecated standard for ftp that required the use of a ssl or tls connection it was specified to use different ports than plain ftp edit sftp sftp the ssh file transfer protocol is not related to ftp except that it also transfers files and has a similar command set for users sftp or secure ftp is a program that uses secure shell ssh to transfer files unlike standard ftp it encrypts both commands and data preventing passwords and sensitive information from being transmitted openly over the network it is functionally similar to ftp but because it uses a different protocol standard ftp clients cannot be used to talk to an sftp server nor can one connect to an ftp server with a client that supports only sftp edit ftp over ssh not sftp ftp over ssh not sftp refers to the practice of tunneling a normal ftp session over an ssh connection 16 because ftp uses multiple tcp connections unusual for a tcp ip protocol that is still in use it is particularly difficult to tunnel over ssh with many ssh clients attempting to set up a tunnel for the control channel the initial client to server connection on port 21 will protect only that channel when data is transferred the ftp software at either end will set up new tcp connections data channels which bypass the ssh connection and thus have no confidentiality or integrity protection etc otherwise it is necessary for the ssh client software to have specific knowledge of the ftp protocol to monitor and rewrite ftp control channel messages and autonomously open new packet forwardings for ftp data channels software packages that support this mode include tectia connectsecure win linux unix of ssh communications security s software suite tectia server for ibm z os of ssh communications security s software suite fonc the gpl licensed co z ftpssh proxy ftp over ssh is sometimes referred to as secure ftp this should not be confused with other methods of securing ftp such as ssl tls ftps other methods of transferring files using ssh that are not related to ftp include sftp and scp in each of these the entire conversation credentials and data is always protected by the ssh protocol edit list of ftp commands below is a list of ftp commands that may be sent to an ftp server including all commands that are standardized in rfc 959 by the ietf all commands below are rfc 959 based unless stated otherwise note that most command line ftp clients present their own set of commands to users for example get is the common user command to download a file instead of the raw command retr command rfc description abor amp 1000000 abort an active file transfer acct amp 1000000 account information adat amp 1002228 rfc 2228 authentication security data allo amp 1000000 allocate sufficient disk space to receive a file appe amp 1000000 append auth amp 1002228 rfc 2228 authentication security mechanism ccc amp 1002228 rfc 2228 clear command channel cdup amp 1000000 change to parent directory conf amp 1002228 rfc 2228 confidentiality protection command cwd amp 1000697 rfc 697 change working directory dele amp 1000000 delete file enc amp 1002228 rfc 2228 privacy protected channel eprt amp 1002428 rfc 2428 specifies an extended address and port to which the server should connect epsv amp 1002428 rfc 2428 enter extended passive mode feat amp 1002389 rfc 2389 get the feature list implemented by the server help amp 1000000 help lang amp 1002640 rfc 2640 language negotiation list amp 1000000 returns information of a file or directory if specified else information of the current working directory is returned lprt amp 1001639 rfc 1639 specifies a long address and port to which the server should connect lpsv amp 1001639 rfc 1639 enter long passive mode mdtm amp 1003659 rfc 3659 return the last modified time of a specified file mic amp 1002228 rfc 2228 integrity protected command mkd amp 1000000 make directory mlsd amp 1003659 rfc 3659 lists the contents of a directory if a directory is named mlst amp 1003659 rfc 3659 provides data about exactly the object named on its command line and no others mode amp 1000000 sets the transfer mode stream block or compressed nlst amp 1000000 returns a list of file names in a specified directory noop amp 1000000 no operation dummy packet used mostly on keepalives opts amp 1002389 rfc 2389 select options for a feature pass amp 1000000 authentication password pasv amp 1000000 enter passive mode pbsz amp 1002228 rfc 2228 protection buffer size port amp 1000000 specifies an address and port to which the server should connect prot amp 1002228 rfc 2228 data channel protection level pwd amp 1000000 print working directory returns the current directory of the host quit amp 1000000 disconnect rein amp 1000000 re initializes the connection rest amp 1003659 rfc 3659 restart transfer from the specified point retr amp 1000000 transfer a copy of the file rmd amp 1000000 remove a directory rnfr amp 1000000 rename from rnto amp 1000000 rename to site amp 1000000 sends site specific commands to remote server size amp 1003659 rfc 3659 return the size of a file smnt amp 1000000 mount file structure stat amp 1000000 returns the current status stor amp 1000000 accept the data and to store the data as a file at the server site stou amp 1000000 store file uniquely stru amp 1000000 set file transfer structure syst amp 1000000 return system type type amp 1000000 sets the transfer mode ascii binary user amp 1000000 authentication username xcup amp 1000775 rfc 775 change to the parent of the current working directory xmkd amp 1000775 rfc 775 make a directory xpwd amp 1000775 rfc 775 print the current working directory xrcp amp 1000743 rfc 743 xrmd amp 1000775 rfc 775 remove the directory xrsq amp 1000743 rfc 743 xsem amp 1000737 rfc 737 send mail if cannot xsen amp 1000737 rfc 737 send to terminal edit ftp reply codes main article list of ftp server return codes below is a summary of the reply codes that may be returned by an ftp server these codes have been standardized in rfc 959 by the ietf as stated earlier in this article the reply code is a three digit value the first digit is used to indicate one of three possible outcomes success failure or to indicate an error or incomplete reply 2yz success reply 4yz or 5yz failure reply 1yz or 3yz error or incomplete reply the second digit defines the kind of error x0z syntax these replies refer to syntax errors x1z information replies to requests for information x2z connections replies referring to the control and data connections x3z authentication and accounting replies for the login process and accounting procedures x4z not defined x5z file system these replies relay status codes from the server file system the third digit of the reply code is used to provide additional detail for each of the categories defined by the second digit edit see also comparison of ftp client software comparison of ftp server software curl loader ftp s loading testing open source sw file exchange protocol fxp file service protocol fsp ftam ftpfs list of file transfer protocols list of ftp server return codes managed file transfer obex shared file access tcp wrapper edit references a b c forouzan b a 2000 tcp ip protocol suite 1st ed new delhi india tata mcgraw hill publishing company limited a b c d e f g h i j kozierok charles m 2005 the tcp ip guide v3 0 tcpiguide com http www tcpipguide com free t ftpoverviewhistoryandstandards htm a b c d e dean tamara 2010 network guide to networks delmar pp 160 168 171 a b c d clark m p 2003 data networks ip and the internet 1st ed west sussex england john wiley amp sons ltd a b postel j amp reynolds j october 1985 in the internet engineering task force a b active ftp vs passive ftp a definitive explanation slacksite com http slacksite com other ftp html see http webcache googleusercontent com search q cache http slacksite com other ftp html if the original web page is not available a b parker don september 2005 understanding the ftp protocol windowsnetworking com http www windowsnetworking com articles tutorials understanding ftp protocol html allman m amp metz c amp ostermann s september 1998 rfc 2428 in the internet engineering task force p amp emtage a amp marine a may 1994 rfc 1635 the internet engineering task force http www ietf org rfc rfc1635 txt a b c gleason mike 2005 the file transfer protocol and your firewall nat ncftp com http www ncftp com ncftpd doc misc ftp and firewalls html kurose j f amp ross k w 2010 computer networking 5th ed boston ma pearson education inc matthews j 2005 computer networking internet protocols in action 1st ed danvers ma john wiley amp sons inc a b berners lee t amp masinter l amp mccahill m december 1994 rfc 1738 the internet engineering task force http www ietf org rfc rfc1738 txt accessing ftp servers how to firefox help support mozilla com 2012 09 05 http support mozilla com en us kb accessing ftp servers ftp servers that require a username and password retrieved 2013 01 16 how to enter ftp site password in internet explorer support microsoft com 2011 09 23 http support microsoft com kb 135975 retrieved 2013 01 16 a b c securing ftp using ssh retrieved from http www nurdletech com ftp html allman m amp ostermann s may 1999 rfc 2577 the internet engineering task force http www ietf org rfc rfc2577 txt edit further reading rfc 959 standard file transfer protocol ftp j postel j reynolds october 1985 rfc 1579 informational firewall friendly ftp rfc 2228 proposed standard ftp security extensions rfc 2389 proposed standard feature negotiation mechanism for the file transfer protocol august 1998 rfc 2428 proposed standard extensions for ipv6 nat and extended passive mode september 1998 rfc 2640 proposed standard internationalization of the file transfer protocol rfc 3659 proposed standard extensions to ftp p hethmon march 2007 rfc 5797 proposed standard ftp command and extension registry march 2010 rfc 697 cwd command of ftp rfc 1639 ftp operation over big address records foobar rfc 5797 ftp command and extension registry edit external links wikibooks has a book on the topic of communication networks file transfer protocol ftp reviewed a review of the protocol notably from a security standpoint pintday org related whitepapers sdsusa com raw ftp command list nsftools com ftp sequence diagram in pdf format eventhelix com ftp server connectivity test infobyip com iana ftp commands and extensions registry the official registry of ftp commands and extensions basic ftp simulation a passive ftp replacement for microsoft windows passive ftp com v t e uri scheme official aaa aaas about acap cap cid crid data dav dict dns fax file ftp geo go gopher h323 http https iax im imap info ldap mailto mid news nfs nntp pop rsync pres rtsp sip sips snmp tag tel telnet tftp urn view source wais ws wss xmpp unofficial afp aim apt bolo bzr callto coffee cvs daap dsnp ed2k feed fish gg git gizmoproject irc ircs itms javascript ldaps magnet mms msnim postal2 secondlife skype spotify ssh svn sftp smb sms steam webcal winamp wyciwyg xfire ymsgr protocol list 