in information retrieval okapi bm25 is a ranking function used by search engines to rank matching documents according to their relevance to a given search query it is based on the probabilistic retrieval framework developed in the 1970s and 1980s by stephen e robertson karen sp rck jones and others the name of the actual ranking function is bm25 to set the right context however it usually referred to as okapi bm25 since the okapi information retrieval system implemented at london s city university in the 1980s and 1990s was the first system to implement this function bm25 and its newer variants e g bm25f a version of bm25 that can take document structure and anchor text into account represent state of the art tf idf like retrieval functions used in document retrieval such as web search contents 1 the ranking function 2 idf information theoretic interpretation 3 modifications 4 footnotes 5 references 6 external links edit the ranking function bm25 is a bag of words retrieval function that ranks a set of documents based on the query terms appearing in each document regardless of the inter relationship between the query terms within a document e g their relative proximity it is not a single function but actually a whole family of scoring functions with slightly different components and parameters one of the most prominent instantiations of the function is as follows given a query containing keywords the bm25 score of a document is where is s term frequency in the document is the length of the document in words and is the average document length in the text collection from which documents are drawn and are free parameters usually chosen in absence of an advanced optimization as and 1 is the idf inverse document frequency weight of the query term it is usually computed as where is the total number of documents in the collection and is the number of documents containing there are several interpretations for idf and slight variations on its formula in the original bm25 derivation the idf component is derived from the binary independence model please note that the above formula for idf shows potentially major drawbacks when using it for terms appearing in more than half of the corpus documents these terms idf is negative so for any two almost identical documents one which contains the term and one which does not contain it the latter will possibly get a larger score this means that terms appearing in more than half of the corpus will provide negative contributions to the final document score this is often an undesirable behavior so many real world applications would deal with this idf formula in a different way each summand can be given a floor of 0 to trim out common terms the idf function can be given a floor of a constant to avoid common terms being ignored at all the idf function can be replaced with a similarly shaped one which is non negative or strictly positive to avoid terms being ignored at all edit idf information theoretic interpretation here is an interpretation from information theory suppose a query term appears in documents then a randomly picked document will contain the term with probability where is again the cardinality of the set of documents in the collection therefore the information content of the message contains is now suppose we have two query terms and if the two terms occur in documents entirely independently of each other then the probability of seeing both and in a randomly picked document is and the information content of such an event is with a small variation this is exactly what is expressed by the idf component of bm25 edit modifications at the extreme values of the coefficient bm25 turns into ranking functions known as bm11 for and bm15 for 2 bm25f 3 is a modification of bm25 in which the document is considered to be composed from several fields such as headlines main text anchor text with possibly different degrees of importance edit footnotes christopher d manning prabhakar raghavan hinrich sch tze an introduction to information retrieval cambridge university press 2009 p 233 http xapian org docs bm25 html hugo zaragoza nick craswell michael taylor suchi saria and stephen robertson microsoft cambridge at trec 13 web and hard tracks in proceedings of trec 2004 edit references stephen e robertson steve walker susan jones micheline hancock beaulieu and mike gatford okapi at trec 3 in proceedings of the third text retrieval conference trec 1994 gaithersburg usa november 1994 stephen e robertson steve walker and micheline hancock beaulieu okapi at trec 7 in proceedings of the seventh text retrieval conference gaithersburg usa november 1998 karen sp rck jones steve walker and stephen e robertson a probabilistic model of information retrieval development and comparative experiments parts 1 and 2 information processing and management 36 6 779 840 2000 edit external links the probabilistic relevance framework bm25 and beyond bm25 implementation for lucene 